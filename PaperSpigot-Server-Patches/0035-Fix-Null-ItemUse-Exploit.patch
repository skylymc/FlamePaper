From 8328d4b15a980f434ff3150c75a90862c2f9327c Mon Sep 17 00:00:00 2001
From: LinsaFTW <25271111+linsaftw@users.noreply.github.com>
Date: Tue, 6 Dec 2022 10:34:33 +0000
Subject: [PATCH] Fix Null ItemUse Exploit


diff --git a/src/main/java/net/minecraft/server/PlayerInteractManager.java b/src/main/java/net/minecraft/server/PlayerInteractManager.java
index 3bb579e7a..fbac5dbae 100644
--- a/src/main/java/net/minecraft/server/PlayerInteractManager.java
+++ b/src/main/java/net/minecraft/server/PlayerInteractManager.java
@@ -379,7 +379,9 @@ public class PlayerInteractManager {
             int j = itemstack.getData();
             ItemStack itemstack1 = itemstack.a(world, entityhuman);
 
-            if (itemstack1 == itemstack && (itemstack1 == null || itemstack1.count == i && itemstack1.l() <= 0 && itemstack1.getData() == j)) {
+            if (itemstack1 == null) {
+                return false;
+            } else if (itemstack1 == itemstack && itemstack1.count == i && itemstack1.l() <= 0 && itemstack1.getData() == j) {
                 return false;
             } else {
                 entityhuman.inventory.items[entityhuman.inventory.itemInHandIndex] = itemstack1;
-- 
2.37.3.windows.1

